<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-client-apis/cpp-api/udf">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">UDF | Kùzu</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://kuzudb.com/img/logo-u-with-orange-tick.jpg"><meta data-rh="true" property="og:url" content="https://kuzudb.com/docusaurus/client-apis/cpp-api/udf"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:locale" content="en_US"><meta data-rh="true" name="og:type" content="article"><meta data-rh="true" name="og:site_name" content="Kùzu"><meta data-rh="true" name="og:image" content="https://kuzudb.com/img/logo-u-with-orange-tick.jpg"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="twitter:site" content="@kuzudb"><meta data-rh="true" name="twitter:creator" content="@kuzudb"><meta data-rh="true" name="twitter:image" content="https://kuzudb.com/img/logo-u-with-orange-tick.jpg"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="UDF | Kùzu"><meta data-rh="true" name="description" content="Kùzu provides users with two interfaces that enable them to define their own custom scalar and vectorized functions."><meta data-rh="true" property="og:description" content="Kùzu provides users with two interfaces that enable them to define their own custom scalar and vectorized functions."><link data-rh="true" rel="icon" href="/docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kuzudb.com/docusaurus/client-apis/cpp-api/udf"><link data-rh="true" rel="alternate" href="https://kuzudb.com/docusaurus/client-apis/cpp-api/udf" hreflang="en"><link data-rh="true" rel="alternate" href="https://kuzudb.com/docusaurus/client-apis/cpp-api/udf" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XV0PE3XW33-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docusaurus/blog/rss.xml" title="Kùzu RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurus/blog/atom.xml" title="Kùzu Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Kùzu" href="/docusaurus/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"><link rel="stylesheet" href="/docusaurus/assets/css/styles.6fd37a31.css">
<link rel="preload" href="/docusaurus/assets/js/runtime~main.7b1e3054.js" as="script">
<link rel="preload" href="/docusaurus/assets/js/main.486ad7a4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://kuzudb.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docusaurus/img/kuzu-logo.png" alt="Kùzu" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docusaurus/img/kuzu-logo-inverse.png" alt="Kùzu" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docusaurus/installation">Docs</a><a class="navbar__item navbar__link" href="/docusaurus/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
            <a href="https://github.com/kuzudb/kuzu" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-github fa-xl"></i>
            </a>
            </div><div class="navbar__item">
            <a href="https://discord.gg/jw7xN2ZhJB" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-discord fa-xl"></i>
            </a>
            </div><div class="navbar__item">
            <a href="https://twitter.com/kuzudb" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-twitter fa-xl"></i>
            </a>
            </div><div class="navbar__item">
            <a href="https://www.youtube.com/@KuzuDB" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-youtube fa-xl"></i>
            </a>
            </div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docusaurus/installation">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/data-import/">Data Import</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Import&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/data-export/">Data Export</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Export&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/cypher/">Cypher</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cypher&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docusaurus/client-apis/">Client APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Client APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/client-apis/cli">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/client-apis/python">Python</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docusaurus/client-apis/cpp-api/">C++</a><button aria-label="Toggle the collapsible sidebar category &#x27;C++&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docusaurus/client-apis/cpp-api/udf">UDF</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/client-apis/c">C</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/client-apis/nodejs">Node.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/client-apis/rust">Rust</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/client-apis/java">Java</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docusaurus/client-apis/external/NET">Other APIs Contributed Externally</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/kuzuexplorer/">KùzuExplorer</a><button aria-label="Toggle the collapsible sidebar category &#x27;KùzuExplorer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docusaurus/development/building-kuzu">Development</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docusaurus/CLA">Contributor Agreement</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docusaurus/client-apis/"><span itemprop="name">Client APIs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docusaurus/client-apis/cpp-api/"><span itemprop="name">C++</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">UDF</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>UDF API</h1><p>Kùzu provides users with two interfaces that enable them to define their own custom scalar and vectorized functions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="connectioncreatescalarfunction">Connection::createScalarFunction<a href="#connectioncreatescalarfunction" class="hash-link" aria-label="Direct link to Connection::createScalarFunction" title="Direct link to Connection::createScalarFunction">​</a></h2><p>This API allows user to register ordinary scalar functions which are defined in c++ and use them as Kùzu built-in functions in a query. UDF functions are as efficient as the built-in functions.
Since two c++ primitive types may map to the same Cypher data types(e.g. <code>int32</code> can map to both <code>INT32</code> or <code>DATE</code> in Kùzu), Kùzu provides two overloaded APIs which can eliminate the ambiguity in datatype mapping.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-create-a-scalar-function-by-automatically-inferring-the-parameter-and-result-type-in-kùzu">1. Create a scalar function by automatically inferring the parameter and result type in Kùzu.<a href="#1-create-a-scalar-function-by-automatically-inferring-the-parameter-and-result-type-in-kùzu" class="hash-link" aria-label="Direct link to 1. Create a scalar function by automatically inferring the parameter and result type in Kùzu." title="Direct link to 1. Create a scalar function by automatically inferring the parameter and result type in Kùzu.">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename TR, typename... Args&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void createScalarFunction(const std::string&amp; name, TR (*udfFunc)(Args...))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-parameters">a. Parameters:<a href="#a-parameters" class="hash-link" aria-label="Direct link to a. Parameters:" title="Direct link to a. Parameters:">​</a></h4><ul><li>template parameters:<ul><li>TR: return type of the UDF in c++.</li><li>ARGS: are the type of the arguments in c++, Kùzu currently support UDF functions with up to 3 parameters.</li></ul></li><li>parameters:<ul><li>name: the name of the function to be created in Kùzu (note: function name must be unique).</li><li>udfFunc: the UDF defined in c++.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-inference-rule-for-c-type-to-cypher-type-is-defined-as">b. Inference rule for c++ type to cypher type is defined as:<a href="#b-inference-rule-for-c-type-to-cypher-type-is-defined-as" class="hash-link" aria-label="Direct link to b. Inference rule for c++ type to cypher type is defined as:" title="Direct link to b. Inference rule for c++ type to cypher type is defined as:">​</a></h4><table><thead><tr><th>C++ type</th><th>Cypher type</th></tr></thead><tbody><tr><td>bool</td><td>BOOL</td></tr><tr><td>int16</td><td>INT16</td></tr><tr><td>int32</td><td>INT32</td></tr><tr><td>int64</td><td>INT64</td></tr><tr><td>float</td><td>FLOAT</td></tr><tr><td>double</td><td>DOUBLE</td></tr><tr><td>std::string</td><td>STRING</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="c-example">c. Example:<a href="#c-example" class="hash-link" aria-label="Direct link to c. Example:" title="Direct link to c. Example:">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a unary scalar function which adds 5 to the input value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static int32_t add5(int32_t x) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return x + 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Register the unary scalar function using the createScalarFunction API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;createScalarFunction(&quot;add5&quot;, &amp;add5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Issue a query using the UDF.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;query(&quot;MATCH (p:person) return add5(to_int32(p.age))&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-create-a-scalar-function-with-input-and-return-type-in-cypher">2. Create a scalar function with input and return type in cypher.<a href="#2-create-a-scalar-function-with-input-and-return-type-in-cypher" class="hash-link" aria-label="Direct link to 2. Create a scalar function with input and return type in cypher." title="Direct link to 2. Create a scalar function with input and return type in cypher.">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename TR, typename... Args&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void createScalarFunction(const std::string&amp; name, TR (*udfFunc)(Args...))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-parameters-1">a. Parameters:<a href="#a-parameters-1" class="hash-link" aria-label="Direct link to a. Parameters:" title="Direct link to a. Parameters:">​</a></h4><ul><li>template parameters:<ul><li>TR: return type of the UDF in c++.</li><li>ARGS: are the type of the arguments in c++, Kùzu currently support UDF functions with up to 3 parameters.</li></ul></li><li>parameters:<ul><li>name: the name of the function to be created in Kùzu (note: function name must be unique).</li><li>parameterTypes: the type of parameters in cypher.</li><li>returnType: the type of return value in cypher.</li><li>udfFunc: the UDF defined in c++.
Note: This function also checks the template types of UDF against the Cypher types passed as arguments(parameterTypes and returnType) and they must follow the rule defined in the data type mapping table.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-cypher-and-c-type-mapping">b. Cypher and C++ type mapping:<a href="#b-cypher-and-c-type-mapping" class="hash-link" aria-label="Direct link to b. Cypher and C++ type mapping:" title="Direct link to b. Cypher and C++ type mapping:">​</a></h4><table><thead><tr><th>Cypher type</th><th>C++ type</th></tr></thead><tbody><tr><td>BOOL</td><td>bool</td></tr><tr><td>INT16</td><td>int16</td></tr><tr><td>INT32, DATE</td><td>int32</td></tr><tr><td>INT64, TIMESTAMP</td><td>int64</td></tr><tr><td>FLOAT</td><td>float</td></tr><tr><td>DOUBLE</td><td>double</td></tr><tr><td>STRING</td><td>std::string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="c-example-1">c. Example:<a href="#c-example-1" class="hash-link" aria-label="Direct link to c. Example:" title="Direct link to c. Example:">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a binary scalar function which adds microseconds to the timestamp value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static int64_t addMicroSeconds(int64_t timestamp, int32_t microSeconds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return timestamp + microSeconds;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Register the binary scalar function using the createScalarFunction API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;createScalarFunction(&quot;addMicro&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std::vector&lt;common::LogicalTypeID&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            common::LogicalTypeID::TIMESTAMP, common::LogicalTypeID::INT32},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        common::LogicalTypeID::TIMESTAMP, &amp;addMicroSeconds);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Issue a query using the UDF.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;query(&quot;MATCH (p:person) return addMicro(p.registerTime, to_int32(p.ID))&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="connectioncreatevectorizedfunction">Connection::createVectorizedFunction<a href="#connectioncreatevectorizedfunction" class="hash-link" aria-label="Direct link to Connection::createVectorizedFunction" title="Direct link to Connection::createVectorizedFunction">​</a></h2><p>Kùzu executes functions on input data in an efficient and vectorized way. In addition to creating scalar user-defined functions(UDFs), Kùzu also provides support for vectorized UDFs. Similar to <code>createScalarFunction</code>, the <code>createVectorizedFunction</code> also offers two APIs to enhance clarity in datatype mapping.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vector-types-in-kùzu">Vector types in Kùzu:<a href="#vector-types-in-kùzu" class="hash-link" aria-label="Direct link to Vector types in Kùzu:" title="Direct link to Vector types in Kùzu:">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-flat-vector-the-vector-only-holds-one-value-at-selectedpositions0-position">1. Flat vector: The vector only holds one value at <code>selectedPositions[0]</code> position.<a href="#1-flat-vector-the-vector-only-holds-one-value-at-selectedpositions0-position" class="hash-link" aria-label="Direct link to 1-flat-vector-the-vector-only-holds-one-value-at-selectedpositions0-position" title="Direct link to 1-flat-vector-the-vector-only-holds-one-value-at-selectedpositions0-position">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Get the position, which stores the value, in the flatVector.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auto pos = flatVector-&gt;state-&gt;selVector-&gt;selectedPositions[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Check whether the value is null.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auto isNull = flatVector-&gt;isNull(pos)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Get the value in the vector using the position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auto value = flatVector-&gt;getValue&lt;datatype&gt;(pos)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Set the value in the vector using the position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flatVector-&gt;setValue(pos, 5 /* valueToSet */)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Set the value to not-null in the vector using the position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flatVector-&gt;setNull(pos, false /* notNull */)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-unflat-vector-the-vector-can-hold-selected_size-number-of-values">2. Unflat vector: The vector can hold SELECTED_SIZE number of values.<a href="#2-unflat-vector-the-vector-can-hold-selected_size-number-of-values" class="hash-link" aria-label="Direct link to 2. Unflat vector: The vector can hold SELECTED_SIZE number of values." title="Direct link to 2. Unflat vector: The vector can hold SELECTED_SIZE number of values.">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Traverse the unflat int64 vector, and add 5 to each value if not null.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> for (auto i = 0u; i &lt; vector.state-&gt;selVector-&gt;selectedSize; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Get the position which stores the ith value in the vector.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto pos = vector.state-&gt;selVector-&gt;selectedPositions[i];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Check whether the value is null.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!vector.isNull(pos)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Retrieve the ith value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto originalVal = vector.getValue&lt;int64_t&gt;(pos);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Update the ith value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            vector.setValue(pos, originalVal + 5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-create-a-vectorized-function-by-automatically-inferring-the-parameter-and-result-type-in-kùzu">1. Create a vectorized function by automatically inferring the parameter and result type in Kùzu.<a href="#1-create-a-vectorized-function-by-automatically-inferring-the-parameter-and-result-type-in-kùzu" class="hash-link" aria-label="Direct link to 1. Create a vectorized function by automatically inferring the parameter and result type in Kùzu." title="Direct link to 1. Create a vectorized function by automatically inferring the parameter and result type in Kùzu.">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename TR, typename... Args&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void createVectorizedFunction(const std::string&amp; name, function::scalar_exec_func scalarFunc)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-parameters-2">a. Parameters:<a href="#a-parameters-2" class="hash-link" aria-label="Direct link to a. Parameters:" title="Direct link to a. Parameters:">​</a></h4><ul><li>template parameters:<ul><li>TR: return type of the UDF in c++.</li><li>ARGS: are the type of the arguments in c++, Kùzu currently support UDF functions with up to 3 parameters.</li></ul></li><li>parameters:<ul><li>name: the name of the function to be created in Kùzu (note: function name must be unique).</li><li>scalarFunc: a vectorized udf function. The vectorized udf function takes in a vector of ValueVectors and puts the result in the resultVector.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-inference-rule-for-c-type-to-cypher-type-is-defined-as-1">b. Inference rule for c++ type to cypher type is defined as:<a href="#b-inference-rule-for-c-type-to-cypher-type-is-defined-as-1" class="hash-link" aria-label="Direct link to b. Inference rule for c++ type to cypher type is defined as:" title="Direct link to b. Inference rule for c++ type to cypher type is defined as:">​</a></h4><table><thead><tr><th>C++ type</th><th>Cypher type</th></tr></thead><tbody><tr><td>bool</td><td>BOOL</td></tr><tr><td>int16</td><td>INT16</td></tr><tr><td>int32</td><td>INT32</td></tr><tr><td>int64</td><td>INT64</td></tr><tr><td>float</td><td>FLOAT</td></tr><tr><td>double</td><td>DOUBLE</td></tr><tr><td>std::string</td><td>STRING</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="c-example-2">c. Example:<a href="#c-example-2" class="hash-link" aria-label="Direct link to c. Example:" title="Direct link to c. Example:">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a vectorized function which adds 4 to each value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static void addFour(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const std::vector&lt;std::shared_ptr&lt;ValueVector&gt;&gt;&amp; parameters, ValueVector&amp; result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(parameters.size() == 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auto parameter = parameters[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result.resetAuxiliaryBuffer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result.state = parameter-&gt;state;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (parameter-&gt;state-&gt;isFlat()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto pos = parameter-&gt;state-&gt;selVector-&gt;selectedPositions[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.setValue(pos, parameter-&gt;getValue&lt;int64_t&gt;(pos) + 4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto i = 0u; i &lt; parameter-&gt;state-&gt;selVector-&gt;selectedSize; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto pos = parameter-&gt;state-&gt;selVector-&gt;selectedPositions[i];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            result.setValue(pos, parameter-&gt;getValue&lt;int64_t&gt;(pos) + 4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Register the vectorized function using the createVectorizedFunction API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;createVectorizedFunction&lt;int64_t, int64_t&gt;(&quot;addFour&quot;, &amp;addFour);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Issue a query using the UDF.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;query(&quot;MATCH (p:person) return addFour(p.age)&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-create-a-vectorized-function-with-input-and-return-type-in-cypher">2. Create a vectorized function with input and return type in cypher.<a href="#2-create-a-vectorized-function-with-input-and-return-type-in-cypher" class="hash-link" aria-label="Direct link to 2. Create a vectorized function with input and return type in cypher." title="Direct link to 2. Create a vectorized function with input and return type in cypher.">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> void createVectorizedFunction(const std::string&amp; name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std::vector&lt;common::LogicalTypeID&gt; parameterTypes, common::LogicalTypeID returnType,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        function::scalar_exec_func scalarFunc)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-parameters-3">a. Parameters:<a href="#a-parameters-3" class="hash-link" aria-label="Direct link to a. Parameters:" title="Direct link to a. Parameters:">​</a></h4><ul><li>parameters:<ul><li>name: the name of the function to be created in Kùzu (note: function name must be unique).</li><li>parameterTypes: the type of parameters in cypher.</li><li>returnType: the type of return value in cypher.</li><li>scalarFunc: a vectorized udf function. The vectorized udf function takes in a vector of ValueVectors and puts the result in the resultVector.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-inference-rule-for-c-type-to-cypher-type-is-defined-as-2">b. Inference rule for c++ type to cypher type is defined as:<a href="#b-inference-rule-for-c-type-to-cypher-type-is-defined-as-2" class="hash-link" aria-label="Direct link to b. Inference rule for c++ type to cypher type is defined as:" title="Direct link to b. Inference rule for c++ type to cypher type is defined as:">​</a></h4><table><thead><tr><th>Cypher type</th><th>C++ type</th></tr></thead><tbody><tr><td>BOOL</td><td>bool</td></tr><tr><td>INT16</td><td>int16</td></tr><tr><td>INT32, DATE</td><td>int32</td></tr><tr><td>INT64, TIMESTAMP</td><td>int64</td></tr><tr><td>FLOAT</td><td>float</td></tr><tr><td>DOUBLE</td><td>double</td></tr><tr><td>STRING</td><td>std::string</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="c-example-3">c. Example:<a href="#c-example-3" class="hash-link" aria-label="Direct link to c. Example:" title="Direct link to c. Example:">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a scalar function which adds right(number of days) to the left(date).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct AddDate {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static inline void operation(date_t&amp; left, int64_t&amp; right, date_t&amp; result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.days = (int32_t)(left.days + right);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Utilize the pre-defined `function::BinaryFunctionExecutor::execute` API to execute the AddDate function on parameters.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Note: Users can utilize Kùzu pre-defined FunctionExecutors(UnaryFunctionExecutor, BinaryFunctionExecutor, TernaryFunctionExecutor) to execute operations on parameters without writing code to retrieve the valueVectors.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static void addDate(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const std::vector&lt;std::shared_ptr&lt;ValueVector&gt;&gt;&amp; parameters, ValueVector&amp; result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert(parameters.size() == 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function::BinaryFunctionExecutor::execute&lt;date_t, int64_t, date_t, AddDate&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *parameters[0], *parameters[1], result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Register the vectorized function using the createVectorizedFunction API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;createVectorizedFunction(&quot;addDate&quot;, std::vector&lt;LogicalTypeID&gt;{LogicalTypeID::DATE, LogicalTypeID::INT64}, LogicalTypeID::DATE, &amp;addDate);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Issue a query using the UDF.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn-&gt;query(&quot;MATCH (p:person) return addDate(p.birthdate, p.age)&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docusaurus/client-apis/cpp-api/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">C++ API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docusaurus/client-apis/c"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">C</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#connectioncreatescalarfunction" class="table-of-contents__link toc-highlight">Connection::createScalarFunction</a><ul><li><a href="#1-create-a-scalar-function-by-automatically-inferring-the-parameter-and-result-type-in-kùzu" class="table-of-contents__link toc-highlight">1. Create a scalar function by automatically inferring the parameter and result type in Kùzu.</a></li><li><a href="#2-create-a-scalar-function-with-input-and-return-type-in-cypher" class="table-of-contents__link toc-highlight">2. Create a scalar function with input and return type in cypher.</a></li></ul></li><li><a href="#connectioncreatevectorizedfunction" class="table-of-contents__link toc-highlight">Connection::createVectorizedFunction</a><ul><li><a href="#vector-types-in-kùzu" class="table-of-contents__link toc-highlight">Vector types in Kùzu:</a></li><li><a href="#1-create-a-vectorized-function-by-automatically-inferring-the-parameter-and-result-type-in-kùzu" class="table-of-contents__link toc-highlight">1. Create a vectorized function by automatically inferring the parameter and result type in Kùzu.</a></li><li><a href="#2-create-a-vectorized-function-with-input-and-return-type-in-cypher" class="table-of-contents__link toc-highlight">2. Create a vectorized function with input and return type in cypher.</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/kuzudb/shared_invite/zt-1w0thj6s7-0bLaU8Sb~4fDMKJ~oejG_g" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/kuzudb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@KuzuDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/410352593" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docusaurus/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kuzudb/kuzu" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Kùzu Team. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docusaurus/assets/js/runtime~main.7b1e3054.js"></script>
<script src="/docusaurus/assets/js/main.486ad7a4.js"></script>
</body>
</html>