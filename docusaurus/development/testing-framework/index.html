<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/testing-framework">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Testing Framework | Kùzu</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://kuzudb.com/docusaurus/development/testing-framework"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:locale" content="en_US"><meta data-rh="true" name="og:type" content="article"><meta data-rh="true" name="og:site_name" content="Kùzu"><meta data-rh="true" name="og:image" content="https://kuzudb.com/img/logo-u-with-orange-tick.jpg"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="twitter:site" content="@kuzudb"><meta data-rh="true" name="twitter:creator" content="@kuzudb"><meta data-rh="true" name="twitter:image" content="https://kuzudb.com/img/logo-u-with-orange-tick.jpg"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Testing Framework | Kùzu"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kuzudb.com/docusaurus/development/testing-framework"><link data-rh="true" rel="alternate" href="https://kuzudb.com/docusaurus/development/testing-framework" hreflang="en"><link data-rh="true" rel="alternate" href="https://kuzudb.com/docusaurus/development/testing-framework" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XV0PE3XW33-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docusaurus/blog/rss.xml" title="Kùzu RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurus/blog/atom.xml" title="Kùzu Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Kùzu" href="/docusaurus/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"><link rel="stylesheet" href="/docusaurus/assets/css/styles.a72d597a.css">
<link rel="preload" href="/docusaurus/assets/js/runtime~main.bc555b33.js" as="script">
<link rel="preload" href="/docusaurus/assets/js/main.06631551.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://kuzudb.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docusaurus/img/kuzu-logo.png" alt="Kùzu" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docusaurus/img/kuzu-logo-inverse.png" alt="Kùzu" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docusaurus/installation">Docs</a><a class="navbar__item navbar__link" href="/docusaurus/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
            <a href="https://github.com/kuzudb/kuzu" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-github fa-xl"></i>
            </a>
            </div><div class="navbar__item">
            <a href="https://join.slack.com/t/kuzudb/shared_invite/zt-1w0thj6s7-0bLaU8Sb~4fDMKJ~oejG_g" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-slack fa-xl"></i>
            </a>
            </div><div class="navbar__item">
            <a href="https://twitter.com/kuzudb" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-twitter fa-xl"></i>
            </a>
            </div><div class="navbar__item">
            <a href="https://www.youtube.com/@KuzuDB" class="navbar__link navbar__link--social">
              <i class="fa-brands fa-youtube fa-xl"></i>
            </a>
            </div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docusaurus/installation">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/data-import/">Data Import</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Import&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/data-export/">Data Export</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Export&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/cypher/">Cypher</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cypher&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docusaurus/client-apis/">Client APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Client APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docusaurus/CLA">Contributor Agreement</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docusaurus/development/building-kuzu">Development</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/development/building-kuzu">Build Kùzu from Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docusaurus/development/testing-framework">Testing Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus/development/performance-debugging">Performance Debugging</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docusaurus/development/database-internal/">Database Internal</a><button aria-label="Toggle the collapsible sidebar category &#x27;Database Internal&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Testing Framework</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Testing Framework</h1><p><img loading="lazy" src="https://codecov.io/github/kuzudb/kuzu/branch/master/graph/badge.svg?token=N1AT6H79LM%22" class="img_ev3q">  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>Testing is a crucial part of Kùzu to ensure the correct functioning of the
system. The general principle for our testing is to avoid testing components individually,
instead we should route all tests, when possible, in the end-to-end way through Cypher statements.
In this way, we have designed a bespoke testing framework, which facilitates comprehensive end-to-end tests via Cypher statements.</p><p>In order to use the e2e testing framework, developers are required to generate
a <code>.test</code> file, which should be placed in the <code>test/test_files</code> directory. Each
test file comprises two key sections: the test header and test body.  In the header section,
the developer specifies the dataset to be used, the test group name and other optional
parameters such as <code>BUFFER_POOL_SIZE</code>.</p><p>Here is a basic example of a test:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># test/test_files/basic.test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># comments can also be addressed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-GROUP Basic </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DATASET CSV tinysnb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-BUFFER_POOL_SIZE 64000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE BasicTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (p:person) RETURN COUNT(*);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first three lines represents the header, separated by <code>--</code>. The testing
framework will parse the file and register a <a href="http://google.github.io/googletest/advanced.html#registering-tests-programmatically" target="_blank" rel="noopener noreferrer">GTest
programatically</a>.
When it comes to the test case name, the provided example above would be equivalent to:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(Basic, BasicTest) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The test framework will test each logical plan created from the prepared
statements and assert the result. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-tests">Running the tests<a href="#running-the-tests" class="hash-link" aria-label="Direct link to Running the tests" title="Direct link to Running the tests">​</a></h2><p>Our primary tool for generating the test list and executing it is <code>ctest</code>. Use the command
<code>make test</code> to build and run all tests. By default, the tests will run
concurrently on 10 jobs, but it is also possible to change the number of parallel jobs by
running <code>make test TEST_JOBS=&lt;desired number of jobs to run in parallel&gt;</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-a-specific-group-or-test-case">Running a specific group or test case<a href="#running-a-specific-group-or-test-case" class="hash-link" aria-label="Direct link to Running a specific group or test case" title="Direct link to Running a specific group or test case">​</a></h3><p>There are two ways to run a specific e2e test or group of tests:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-using-ctest-and-specifying-the-name-of-the-test-example">1. Using ctest and specifying the name of the test. Example:<a href="#1-using-ctest-and-specifying-the-name-of-the-test-example" class="hash-link" aria-label="Direct link to 1. Using ctest and specifying the name of the test. Example:" title="Direct link to 1. Using ctest and specifying the name of the test. Example:">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Run the all tests from StringPrimaryKeyTest group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ctest -R StringPrimaryKeyTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run only PrimaryKeySecondColumn test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ctest -R StringPrimaryKeyTest.PrimaryKeySecondColumn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run in verbose mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ctest -V -R BinderErrorTest.MatchBuiltIn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run in parallel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ctest -j 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-running-directly-from-e2e_test-binary">2. Running directly from <code>e2e_test</code> binary<a href="#2-running-directly-from-e2e_test-binary" class="hash-link" aria-label="Direct link to 2-running-directly-from-e2e_test-binary" title="Direct link to 2-running-directly-from-e2e_test-binary">​</a></h3><p>The test binaries are available in <code>build/release[or debug]/test/runner</code>
folder. You can run <code>e2e_test</code> specifying the relative path file inside
<code>test_files</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Run all tests inside test/test_files/copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./e2e_test copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run all tests from test/test_files/long_string_pk.test file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./e2e_test long_string_pk/long_string_pk.test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run all tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./e2e_test .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong><em>Note:</em></strong> Some test files contain multiple test cases, and sometimes it is not easy
to find the output from a failed test. In this situation, parameter
<code>--gtest_break_on_failure</code> might be helpful to break the test on failure.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-file-header">Test file header<a href="#test-file-header" class="hash-link" aria-label="Direct link to Test file header" title="Direct link to Test file header">​</a></h2><p>The <code>.test</code> file header contains two required parameters: <code>-GROUP</code> and
<code>-DATASET</code>, to specify the test group name and the dataset to be used. If no
dataset is required, use the keyword &#x27;empty&#x27;.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="specifying-the-dataset">Specifying the Dataset<a href="#specifying-the-dataset" class="hash-link" aria-label="Direct link to Specifying the Dataset" title="Direct link to Specifying the Dataset">​</a></h3><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>-DATASET [type] [dataset name]</code></td><td><strong>type:</strong> CSV, PARQUET, NPY or empty<br> <strong>dataset name:</strong> the name of the directory inside  <code>dataset/</code>. i.e. tinysnb.</td></tr></tbody></table><p>Examples:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-GROUP MyTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DATASET CSV tinysnb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-GROUP MyTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DATASET PARQUET demo-db/parquet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="converting-csv-to-parquet">Converting CSV to Parquet<a href="#converting-csv-to-parquet" class="hash-link" aria-label="Direct link to Converting CSV to Parquet" title="Direct link to Converting CSV to Parquet">​</a></h4><p>It is also possible to make a conversion from CSV dataset to PARQUET file format
using <code>CSV_TO_PARQUET(dataset path)</code>. This case is especially useful to ensure
the expected result remains the same for both CSV and PARQUET file format
without storing the same dataset in the codebase twice.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-GROUP MyTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DATASET PARQUET CSV_TO_PARQUET(tinysnb)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong><em>Note:</em></strong> for the conversion, the framework does not match the current schema to
the parquet files. It relies on arrow to auto detect the datatype when reading
and convering the CSV to Parquet.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-properties">Other properties<a href="#other-properties" class="hash-link" aria-label="Direct link to Other properties" title="Direct link to Other properties">​</a></h3><p>Other optional parameters include <code>-BUFFER_POOL_SIZE</code> and <code>-SKIP</code>. By including
<code>-SKIP</code> in the header, the entire suite will be deactivated, but the tests
will still be displayed as disabled when running through <code>ctest</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-case">Test case<a href="#test-case" class="hash-link" aria-label="Direct link to Test case" title="Direct link to Test case">​</a></h2><p>The following example illustrates a basic structure of how to create a test case:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-GROUP Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DATASET tinysnb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE MyTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-LOG Test A Count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (p:person) RETURN COUNT(*);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the example above:</p><p><code>-CASE</code> is the name of the test case, analogous to <code>TEST_F(Test, MyTest)</code> in C++.<br>
<code>-LOG</code> is optional and will be only used for display purposes when running in verbose mode.<br>
<code>-STATEMENT</code> is followed by 4 dashes <code>----</code> alongside the expected result (error, success or the number of the tuples).   </p><p>When specifying a number after the dashes, it&#x27;s necessary to add the same number of tuples in the
next following lines.  </p><p>If the subsequent lines contain additional statements to validate, they will be incorporated into the same test case
unless a new <code>-CASE</code> is written.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="results">Results<a href="#results" class="hash-link" aria-label="Direct link to Results" title="Direct link to Results">​</a></h3><p>There are three ways to specify the expected result:</p><table><thead><tr><th>Result</th><th>Description</th></tr></thead><tbody><tr><td><code>---- error</code></td><td>The following lines must be the expected error message.</td></tr><tr><td><code>---- ok</code></td><td>does not require any additional information below the line.</td></tr><tr><td><code>---- [number of expected tuples]</code></td><td>The following lines must be exactly the query results.</td></tr></tbody></table><blockquote><p><strong><em>Note:</em></strong> By default, the expected result tuples can be written in any
order. The framework will sort the actual <!-- -->&amp;<!-- --> expected results before
comparing. If you need the results not to be sorted, you can set it by adding
<code>-CHECK_ORDER</code> before the statement.</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Expects error message </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (p:person) RETURN COUNT(intended-error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: Binder exception: Variable intended is not in scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Success results don&#x27;t need anything after the dashes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT CREATE NODE TABLE  Person (ID INT64, PRIMARY KEY (ID));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person) RETURN a.fName LIMIT 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Carol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dan</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Query results can also be stored in a file. By using <code>&lt;FILE&gt;:</code>, the testing
framework reads the results from the file and compare to the actual query
result. The file must be created inside <code>test/answers/&lt;name-of-the-file.txt&gt;</code>. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (p0:person)-[r:knows]-&gt;(p1:person) RETURN ID(r)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 5001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;FILE&gt;:file_with_answers.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-properties">Additional properties<a href="#additional-properties" class="hash-link" aria-label="Direct link to Additional properties" title="Direct link to Additional properties">​</a></h3><p>It is also possible to use the additional properties inside each test case:</p><table><thead><tr><th>Property</th><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>-LOG</code></td><td>any string</td><td>Define a name for each block for informational purposes</td></tr><tr><td><code>-SKIP</code></td><td>none</td><td>Register the test but skip the whole test case. When a test is skipped, it will display as disabled in the test run</td></tr><tr><td><code>-PARALLELISM</code></td><td>integer</td><td>Default: 4. The number of threads that will be set by <code>connection.setMaxNumThreadForExec()</code></td></tr><tr><td><code>-BEGIN_WRITE_TRANSACTION</code></td><td>none</td><td>Call <code>connection.beginWriteTransaction()</code> before the subsequent statements.</td></tr><tr><td><code>-CHECK_ORDER</code></td><td>none</td><td>By default, the query results and expected results are ordered before asserting comparison.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="defining-variables">Defining variables<a href="#defining-variables" class="hash-link" aria-label="Direct link to Defining variables" title="Direct link to Defining variables">​</a></h3><p>A variable can be defined and re-used inside a statement, results or error
message:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-DEFINE EXPECTED_RESULT &quot;0|1:0|0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE Backward</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (p0:person)&lt;-[r:knows]-(p1:person) WHERE p0.ID = 0 RETURN p0.ID, ID(r), p1.ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">${EXPECTED_RESULT}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE Forward</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (p0:person)-[r:knows]-&gt;(p1:person) WHERE p0.ID = 0 RETURN p0.ID, ID(r), p1.ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">${EXPECTED_RESULT}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A more practical example is using functions alongside <code>-DEFINE</code>. The framework
currently support the following functions: </p><table><thead><tr><th>Function</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>-DEFINE [var] ARANGE [start] [end]</code></td><td>Generate a list of numbers from start to end</td><td><code>-DEFINE STRING_OVERFLOW ARANGE 0 5</code> <br> generates <code>STRING_OVERFLOW = [0,1,2,3,4,5]</code></td></tr><tr><td><code>-DEFINE [var] REPEAT [count] &quot;[text]&quot;</code></td><td>Repeat the text multiple times</td><td><code>-DEFINE MY_STR REPEAT 3 &quot;MyString&quot;</code><br> generates <code>MY_STR = &quot;MyStringMyStringMyString&quot;</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pre-defined-variables">Pre-defined variables<a href="#pre-defined-variables" class="hash-link" aria-label="Direct link to Pre-defined variables" title="Direct link to Pre-defined variables">​</a></h4><p>The following variables are available to use inside the statements:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>${KUZU_ROOT_DIRECTORY}</code></td><td>Kùzu directory path</td></tr><tr><td><code>${DATABASE_PATH}</code></td><td>When a test case runs, a temporary database path is created and cleaned up after the suite finishes. This variable represents the path of the running test case.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="defining-statement-blocks">Defining statement blocks<a href="#defining-statement-blocks" class="hash-link" aria-label="Direct link to Defining statement blocks" title="Direct link to Defining statement blocks">​</a></h3><p>A statement block can be defined and re-used along the test file.<br>
<code>-DEFINE_STATEMENT_BLOCK</code> define a block that can be used by
calling <code>-INSERT_STATEMENT_BLOCK</code> in any part of the test case body. It
can be useful to perform checks without having to re-write the same staments
again.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-DEFINE_STATEMENT_BLOCK CREATE_PERSON_REL [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person), (b:person) WHERE a.ID=10 AND b.ID=20 CREATE (a)-[e:knows]-&gt;(b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person), (b:person) WHERE a.ID=1 AND b.ID=2 CREATE (a)-[e:knows]-&gt;(b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE TestCaseA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-INSERT_STATEMENT_BLOCK CREATE_PERSON_REL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE TestCaseB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-INSERT_STATEMENT_BLOCK CREATE_PERSON_REL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h2><p>Full example with comments.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># We can add -SKIP here if we need to temporarily skip the whole file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-GROUP Create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-TEST CreateRelTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-BUFFER_POOL_SIZE 64000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DATASET PARQUET CSV_TO_PARQUET(tinysnb)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-DEFINE_STATEMENT_BLOCK create_rel_set [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person), (b:person) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 WHERE a.ID=10 AND b.ID=20 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 CREATE (a)-[e:knows]-&gt;(b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person), (b:person) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 WHERE a.ID=1 AND b.ID=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 CREATE (a)-[e:knows]-&gt;(b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE TestRelationSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-LOG Current Relaaation Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person)-[e:knows]-&gt;(b:person) RETURN COUNT(*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This is also part of TestRelationSet test case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-LOG Create Relation Set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-INSERT_STATEMENT_BLOCK create_rel_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person)-[e:knows]-&gt;(b:person) RETURN COUNT(*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This is also part of TestRelationSet test case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-LOG Test Duplicated Primary Key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person), (b:person)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 WHERE a.ID=1 AND b.ID=20 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 CREATE (a)-[e:knows]-&gt;(b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Exception: Duplicate primary key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># New test case. Start a new database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE OrderCheck</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CHECK_ORDER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-PARALLELISM 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person)-[:studyAt]-&gt;(b:organisation) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             WHERE b.name = &quot;Waterloo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             RETURN a.name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    a.age ORDER BY a.age DESC;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Karissa|40</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Adam|30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Read query results from a file to compare </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-CASE PersonOrganisationRelTest </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (a:person)-[:studyAt]-&gt;(b:organisation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RETURN a.ID, b.ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;FILE&gt;:person_study_at_answers.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example of <code>BEGIN_WRITE_TRANSACTION</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-CASE ParsingErrorRollbackTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-BEGIN_WRITE_TRANSACTION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT CREATE (p:person {ID: 100})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (:person) RETURN count(*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT RETURN make_date(2011,1,32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date out of range: 2011-1-32.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-STATEMENT MATCH (:person) RETURN count(*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---- 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><a href="https://github.com/kuzudb/kuzu/blob/1bd26e46eac7a5de1d8776bab74988b05c4913dc/test/test_files/tinysnb/update_node/set.test#LL78C33-L78C36" target="_blank" rel="noopener noreferrer">set.test</a></td><td>ARANGE example</td></tr><tr><td><a href="https://github.com/kuzudb/kuzu/blob/1bd26e46eac7a5de1d8776bab74988b05c4913dc/test/test_files/copy/copy_long_string.test" target="_blank" rel="noopener noreferrer">copy_long_string.test</a></td><td>REPEAT example</td></tr><tr><td><a href="https://github.com/kuzudb/kuzu/blob/1bd26e46eac7a5de1d8776bab74988b05c4913dc/test/test_files/copy/copy_multiple_files.test" target="_blank" rel="noopener noreferrer">copy_multiple_files.test</a></td><td>Using statement blocks</td></tr><tr><td><a href="https://github.com/kuzudb/kuzu/blob/1bd26e46eac7a5de1d8776bab74988b05c4913dc/test/test_files/exceptions/catalog/catalog.test" target="_blank" rel="noopener noreferrer">catalog.test</a></td><td>Dealing with exceptions</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docusaurus/development/building-kuzu"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Build Kùzu from Source</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docusaurus/development/performance-debugging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance Debugging</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#running-the-tests" class="table-of-contents__link toc-highlight">Running the tests</a><ul><li><a href="#running-a-specific-group-or-test-case" class="table-of-contents__link toc-highlight">Running a specific group or test case</a></li><li><a href="#1-using-ctest-and-specifying-the-name-of-the-test-example" class="table-of-contents__link toc-highlight">1. Using ctest and specifying the name of the test. Example:</a></li><li><a href="#2-running-directly-from-e2e_test-binary" class="table-of-contents__link toc-highlight">2. Running directly from <code>e2e_test</code> binary</a></li></ul></li><li><a href="#test-file-header" class="table-of-contents__link toc-highlight">Test file header</a><ul><li><a href="#specifying-the-dataset" class="table-of-contents__link toc-highlight">Specifying the Dataset</a></li><li><a href="#other-properties" class="table-of-contents__link toc-highlight">Other properties</a></li></ul></li><li><a href="#test-case" class="table-of-contents__link toc-highlight">Test case</a><ul><li><a href="#results" class="table-of-contents__link toc-highlight">Results</a></li><li><a href="#additional-properties" class="table-of-contents__link toc-highlight">Additional properties</a></li><li><a href="#defining-variables" class="table-of-contents__link toc-highlight">Defining variables</a></li><li><a href="#defining-statement-blocks" class="table-of-contents__link toc-highlight">Defining statement blocks</a></li></ul></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/kuzudb/shared_invite/zt-1w0thj6s7-0bLaU8Sb~4fDMKJ~oejG_g" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/kuzudb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@KuzuDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/410352593" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docusaurus/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kuzudb/kuzu" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Kùzu Team. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docusaurus/assets/js/runtime~main.bc555b33.js"></script>
<script src="/docusaurus/assets/js/main.06631551.js"></script>
</body>
</html>