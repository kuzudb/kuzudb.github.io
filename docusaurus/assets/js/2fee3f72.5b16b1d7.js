"use strict";(self.webpackChunkkuzu_docs=self.webpackChunkkuzu_docs||[]).push([[7670],{3905:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>h});var a=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var c=a.createContext({}),l=function(e){var r=a.useContext(c),t=r;return e&&(t="function"==typeof e?e(r):s(s({},r),e)),t},p=function(e){var r=l(e.components);return a.createElement(c.Provider,{value:r},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},d=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=l(t),d=n,h=u["".concat(c,".").concat(d)]||u[d]||m[d]||o;return t?a.createElement(h,s(s({ref:r},p),{},{components:t})):a.createElement(h,s({ref:r},p))}));function h(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,s=new Array(o);s[0]=d;var i={};for(var c in r)hasOwnProperty.call(r,c)&&(i[c]=r[c]);i.originalType=e,i[u]="string"==typeof e?e:n,s[1]=i;for(var l=2;l<o;l++)s[l]=t[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},3326:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=t(7462),n=(t(7294),t(3905));const o={title:"Macro",sidebar_position:5},s="Create Macro",i={unversionedId:"cypher/macro",id:"cypher/macro",title:"Macro",description:"K\xf9zu allows user to create a macro in catalog using the create macro statement. The process of creating macros involves using the CREATE MACRO keyword followed by the macro's name. Users can optionally include parameters with optional default value within parentheses after the name. The \"AS\" keyword comes next, followed by the actual cypher expression of the macro. It's important to note that a scalar macro is limited to returning only a single value.",source:"@site/docs/cypher/macro.md",sourceDirName:"cypher",slug:"/cypher/macro",permalink:"/docusaurus/cypher/macro",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Macro",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Set",permalink:"/docusaurus/cypher/data-manipulation-clauses/set"},next:{title:"Client APIs",permalink:"/docusaurus/client-apis/"}},c={},l=[{value:"Default parameters",id:"default-parameters",level:2},{value:"Supported macro expression types",id:"supported-macro-expression-types",level:2},{value:"Case Expression Macro",id:"case-expression-macro",level:3},{value:"Function Expression Macro",id:"function-expression-macro",level:3},{value:"Literal Expression Macro",id:"literal-expression-macro",level:3},{value:"Property Expression Macro",id:"property-expression-macro",level:3},{value:"Variable Expression Macro",id:"variable-expression-macro",level:3}],p={toc:l},u="wrapper";function m(e){let{components:r,...t}=e;return(0,n.kt)(u,(0,a.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"create-macro"},"Create Macro"),(0,n.kt)("p",null,"K\xf9zu allows user to create a macro in catalog using the ",(0,n.kt)("inlineCode",{parentName:"p"},"create macro")," statement. The process of creating macros involves using the ",(0,n.kt)("inlineCode",{parentName:"p"},"CREATE MACRO")," keyword followed by the macro's name. Users can optionally include parameters with optional default value within parentheses after the name. The \"AS\" keyword comes next, followed by the actual cypher expression of the macro. It's important to note that a scalar macro is limited to returning only a single value."),(0,n.kt)("h2",{id:"default-parameters"},"Default parameters"),(0,n.kt)("p",null,"Users can assign default value to parameters. If a query does not specify a value for a parameter, the predefined default value(if exists) will be applied instead. Note: parameters with default value must be defined after parameters without default value in the signature of the macro."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Create a macro which adds two parameters. If the second parameter(b) is not provided, the default value (3) will be used instead.\ncreate macro addWithDefault(a,b:=3) as a + b;\n// Executes the macro without providing the default value.\nreturn addWithDefault(2);  // returns 5 (2 + 3)\n// Executes the macro by providing the default value (actual parameter value will be used).\nreturn addWithDefault(4, 7);  // returns 11 (4 + 7)\n")),(0,n.kt)("h2",{id:"supported-macro-expression-types"},"Supported macro expression types"),(0,n.kt)("h3",{id:"case-expression-macro"},"Case Expression Macro"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Creates a case macro which executes sub-expressions based on input value.\nCREATE MACRO case_macro(x) AS CASE x WHEN 35 THEN x + 1 ELSE x - 5 END\n// Executes queries using the case macro.\nmatch (a:person) return case_macro(a.age) as age\n")),(0,n.kt)("h3",{id:"function-expression-macro"},"Function Expression Macro"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Creates a function macro which executes an arithmetic expression.\nCREATE MACRO func_macro(x) AS x + 3 + 2.5 + to_float(2.1)\n// Executes queries using the function macro.\nmatch (a:person) return func_macro(a.age) as age\n")),(0,n.kt)("h3",{id:"literal-expression-macro"},"Literal Expression Macro"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Creates a literal macro which simply returns a literal value.\nCREATE MACRO str_literal() AS 'result'\n// Executes queries using the literal macro.\nreturn str_literal()\n")),(0,n.kt)("h3",{id:"property-expression-macro"},"Property Expression Macro"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Creates a property macro which simply returns a property of the parameter.\nCREATE MACRO prop_macro(x) AS x.ID\n// Executes queries using the property macro.\nmatch (a:person) return prop_macro(a) as age\n")),(0,n.kt)("h3",{id:"variable-expression-macro"},"Variable Expression Macro"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"// Creates a variable macro which simply returns the parameter.\nCREATE MACRO var_macro(x) AS x\n// Executes queries using the variable macro.\nmatch (a:person) return var_macro(a.ID)\n")))}m.isMDXComponent=!0}}]);