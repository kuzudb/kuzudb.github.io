"use strict";(self.webpackChunkkuzu_docs=self.webpackChunkkuzu_docs||[]).push([[6339],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(a),m=r,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return a?n.createElement(h,l(l({ref:t},u),{},{components:a})):n.createElement(h,l({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},3563:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={title:"Database",sidebar_position:0},l=void 0,i={unversionedId:"client-apis/python-api/database",id:"client-apis/python-api/database",title:"Database",description:"Database",source:"@site/docs/client-apis/python-api/database.md",sourceDirName:"client-apis/python-api",slug:"/client-apis/python-api/database",permalink:"/docusaurus/client-apis/python-api/database",draft:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{title:"Database",sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"Python API",permalink:"/docusaurus/client-apis/python-api/"},next:{title:"Connection & Querying",permalink:"/docusaurus/client-apis/python-api/connection"}},s={},p=[{value:"Database",id:"database",level:2},{value:"Available APIs:",id:"available-apis",level:3}],u={toc:p},c="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("a",{id:"database.Database"}),(0,r.kt)("h2",{id:"database"},"Database"),(0,r.kt)("p",null,"The database class is used to create and manage the K\xf9zu database instance."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"class Database()\n")),(0,r.kt)("h3",{id:"available-apis"},"Available APIs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#database.Database.__init__"},"_","_","init","_","_")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#database.Database.set_logging_level"},"set","_","logging","_","level")," Set the logging level."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#database.Database.get_torch_geometric_remote_backend"},"get","_","torch","_","geometric","_","remote","_","backend")," Use the database as the remote backend for torch_geometric. ")),(0,r.kt)("hr",null),(0,r.kt)("a",{id:"database.Database.__init__"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"_","_","init","_","_")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def __init__(database_path, buffer_pool_size)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"database_path : _kuzu.Database")," The path to database files")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"buffer_pool_size : int")," The maximum size of buffer pool in bytes (Optional). Default to 80% of system memory."))),(0,r.kt)("hr",null),(0,r.kt)("a",{id:"database.Database.set_logging_level"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"set","_","logging","_","level")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def set_logging_level(level)\n")),(0,r.kt)("p",null,"Set the logging level."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"level : str"),' Logging level. One of "debug", "info", "err".')),(0,r.kt)("hr",null),(0,r.kt)("a",{id:"database.Database.get_torch_geometric_remote_backend"}),"**get\\_torch\\_geometric\\_remote\\_backend**",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def get_torch_geometric_remote_backend(num_threads=None):\n")),(0,r.kt)("p",null,"Use the database as the remote backend for torch_geometric. "),(0,r.kt)("p",null,"For the interface of the remote backend, please refer to\n",(0,r.kt)("a",{parentName:"p",href:"https://pytorch-geometric.readthedocs.io/en/latest/advanced/remote.html"},"https://pytorch-geometric.readthedocs.io/en/latest/advanced/remote.html"),".\nThe current implementation is read-only and does not support edge features. The IDs of the nodes are based on the internal IDs (i.e., node offsets). For the remote node IDs to be consistent with the positions in the output tensors, please ensure that no deletion has been performed on the node tables. "),(0,r.kt)("p",null,"The remote backend can also be plugged into the data loader of torch_geometric, which is useful for mini-batch training. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"    loader_kuzu = NeighborLoader(\n        data=(feature_store, graph_store),\n        num_neighbors={('paper', 'cites', 'paper'): [12, 12, 12]},\n        batch_size=LOADER_BATCH_SIZE,\n        input_nodes=('paper', input_nodes),\n        num_workers=4,\n        filter_per_worker=False,\n    )\n")),(0,r.kt)("p",null,"Please note that the database instance is not fork-safe, so if more than one worker is used, ",(0,r.kt)("inlineCode",{parentName:"p"},"filter_per_worker")," must be set to ",(0,r.kt)("inlineCode",{parentName:"p"},"False"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Parameters")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"num_threads : int")," Number of threads to use for data loading. Default to None, which means using the number of CPU cores.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returns")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"feature_store")," Feature store compatible with torch_geometric."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"graph_store")," Graph store compatible with torch_geometric.")))}d.isMDXComponent=!0}}]);