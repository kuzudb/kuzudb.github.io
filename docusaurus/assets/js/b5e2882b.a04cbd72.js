"use strict";(self.webpackChunkkuzu_docs=self.webpackChunkkuzu_docs||[]).push([[2757],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=p(a),c=n,m=h["".concat(l,".").concat(c)]||h[c]||d[c]||o;return a?r.createElement(m,i(i({ref:t},u),{},{components:a})):r.createElement(m,i({ref:t},u))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:n,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},2910:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var r=a(7462),n=(a(7294),a(3905));const o={slug:"kuzu-0.0.2-release",authors:["team"],tags:["release"]},i="K\xf9zu 0.0.2 Release",s={permalink:"/docusaurus/blog/kuzu-0.0.2-release",source:"@site/blog/2023-02-13-kuzu-v-0.0.2.md",title:"K\xf9zu 0.0.2 Release",description:"This post is about the second release of K\xf9zu. However, we want to start with something much more important:",date:"2023-02-13T00:00:00.000Z",formattedDate:"February 13, 2023",tags:[{label:"release",permalink:"/docusaurus/blog/tags/release"}],readingTime:6.33,hasTruncateMarker:!0,authors:[{name:"K\xf9zu Team",url:"https://github.com/kuzudb/",key:"team"}],frontMatter:{slug:"kuzu-0.0.2-release",authors:["team"],tags:["release"]},prevItem:{title:"Why (Graph) DBMSs Need New Join Algorithms: The Story of Worst-case Optimal Join Algorithms",permalink:"/docusaurus/blog/wcoj"},nextItem:{title:"Factorization & Great Ideas from Database Theory",permalink:"/docusaurus/blog/factorization"}},l={authorsImageUrls:[void 0]},p=[{value:"Donate to the Victims of T\xfcrkiye-Syria Earthquake:",id:"donate-to-the-victims-of-t\xfcrkiye-syria-earthquake",level:3},{value:"Overview of K\xf9zu 0.0.2",id:"overview-of-k\xf9zu-002",level:2},{value:"Exporting Query Results to Pytorch Geometric and NetworkX",id:"exporting-query-results-to-pytorch-geometric-and-networkx",level:2},{value:"Pytorch Geometric: <code>QueryResult.get_as_torch_geometric()</code> function",id:"pytorch-geometric-queryresultget_as_torch_geometric-function",level:3},{value:"NetworkX: <code>QueryResult.get_as_networkx()</code> function",id:"networkx-queryresultget_as_networkx-function",level:3},{value:"Data Import from and Export to Parquet and Arrow",id:"data-import-from-and-export-to-parquet-and-arrow",level:2},{value:"Multi-labeled or Unlabeled Queries",id:"multi-labeled-or-unlabeled-queries",level:2},{value:"Other Important Changes",id:"other-important-changes",level:2},{value:"Enhanced String Features",id:"enhanced-string-features",level:3},{value:"CASE Expression",id:"case-expression",level:3},{value:"ALTER/DROP/SET/DELETE",id:"alterdropsetdelete",level:3},{value:"Disable Relationships with Multiple Source or Destination Labels",id:"disable-relationships-with-multiple-source-or-destination-labels",level:3}],u={toc:p},h="wrapper";function d(e){let{components:t,...a}=e;return(0,n.kt)(h,(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This post is about the second release of K\xf9zu. However, we want to start with something much more important:"),(0,n.kt)("h3",{id:"donate-to-the-victims-of-t\xfcrkiye-syria-earthquake"},"Donate to the Victims of ",(0,n.kt)("a",{parentName:"h3",href:"https://www.bbc.com/news/world-middle-east-64590946"},"T\xfcrkiye-Syria Earthquake"),":"),(0,n.kt)("p",null,"Our hearts, thoughts, and prayers go to all the victims, those who survived and those who passed,\nin Syria and T\xfcrkiye.\nThere will be a very difficult winter for all those who survived so everyone needs to help.\nHere are two pointers for trustworthy organizations we know of that are trying to help\nvictims on the ground. For T\xfcrkiye (where Semih is from), you can donate to ",(0,n.kt)("a",{parentName:"p",href:"https://ahbap.org/bagis-kategorisi/5"},"Ahbap"),"\n(Please be aware that ",(0,n.kt)("strong",{parentName:"p"},"the donation currency is in TL")," and 14 TL = 1 CAD; 19TL = 1 USD); and for Syria\nyou can donate to the ",(0,n.kt)("a",{parentName:"p",href:"https://www.whitehelmets.org/en/"},"White Helmets"),". Be generous! We'll leave pointers to several\nother organizations below in this footnote",(0,n.kt)("sup",{parentName:"p",id:"fnref-1-4af10a"},(0,n.kt)("a",{parentName:"sup",href:"#fn-1-4af10a",className:"footnote-ref"},"1")),"."),(0,n.kt)("h2",{id:"overview-of-k\xf9zu-002"},"Overview of K\xf9zu 0.0.2"),(0,n.kt)("p",null,"Back to our release. K\xf9zu codebase is changing fast but this release still has a focus: we\nhave worked quite hard since the last release to integrate K\xf9zu to import data from\ndifferent formats and export data to different formats. There are also several important\nfeatures in the new Cypher clauses and queries we support,  additional string\nprocessing capabilities, and new DDL statement support. We will give a summary of each\nof these below."),(0,n.kt)("p",null,"For installing the new version, please visit the ",(0,n.kt)("a",{parentName:"p",href:"https://kuzudb.com/docs/getting-started.html"},"installation guide")," and\nthe full\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/kuzudb/kuzu/releases"},"release notes are here"),". If you are eager to play with\na few Colab notebooks, here are several links: "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://colab.research.google.com/drive/15OLPggnRSBmR_K9yzq6iAGE5MDzNwqoN"},"General K\xf9zu Demo")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://colab.research.google.com/drive/1fzcwBwTY-M19p7OOTIaynfgHFcAQo9NK"},"Export Query Results to Pytorch Geometric: Node Property Prediction Example")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://colab.research.google.com/drive/1QdX7CDdajIAb04lqaO5PfJlpKG-ljG28"},"Export Query Results to Pytorch Geometric: Link Prediction Example")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://colab.research.google.com/drive/1NDsnFDWcSGoaOl-mOgG0zrPG2VAr8Q6H"},"Export Query Results to NetworkX"))),(0,n.kt)("h2",{id:"exporting-query-results-to-pytorch-geometric-and-networkx"},"Exporting Query Results to Pytorch Geometric and NetworkX"),(0,n.kt)("p",null,"Perhaps most excitingly, we have added the first capabilities to integrate with 2 popular\ngraph data science\nlibraries: (i) ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/pyg-team/pytorch_geometric"},"Pytorch Geometric")," (PyG) for performing\ngraph machine learning; and (ii) ",(0,n.kt)("a",{parentName:"p",href:"https://networkx.org/"},"NetworkX")," for a variety of\ngraph analytics, including visualization. "),(0,n.kt)("h3",{id:"pytorch-geometric-queryresultget_as_torch_geometric-function"},"Pytorch Geometric: ",(0,n.kt)("inlineCode",{parentName:"h3"},"QueryResult.get_as_torch_geometric()")," function"),(0,n.kt)("p",null,"Our ",(0,n.kt)("a",{parentName:"p",href:"https://kuzudb.com/docs/client-apis/python-api/overview.html"},"Python API")," now has a\nnew ",(0,n.kt)("a",{parentName:"p",href:"../docs/client-apis/python-api/query-result.md#query_result.QueryResult.get_as_torch_geometric"},(0,n.kt)("inlineCode",{parentName:"a"},"QueryResult.get_as_torch_geometric()"))," function that\nconverts results of queries to PyG's in-memory graph representation\n",(0,n.kt)("a",{parentName:"p",href:"https://pytorch-geometric.readthedocs.io/en/latest/modules/data.html"},(0,n.kt)("inlineCode",{parentName:"a"},"torch_geometric.data")),".\nIf your query results contains nodes and relationship objects, then the function uses\nthose nodes and relationships to construct either ",(0,n.kt)("inlineCode",{parentName:"p"},"torch_geometric.data.Data")," or\n",(0,n.kt)("inlineCode",{parentName:"p"},"torch_geometric.data.HeteroData")," objects. The function also auto-converts any numeric or boolean property\non the nodes into tensors on the nodes that can be used as features in the ",(0,n.kt)("inlineCode",{parentName:"p"},"Data/HeteroData")," objects.\nAny property that cannot be auto-converted and the edge properties are also returned in case you need\nwant to manually put them into the ",(0,n.kt)("inlineCode",{parentName:"p"},"Data/HeteroData")," objects."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Colab Demonstrations:"),"\nHere are 2 Colab notebooks that you can play around with to see how you can develop graph learning\npipelines using K\xf9zu as your GDBMSs:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://colab.research.google.com/drive/1fzcwBwTY-M19p7OOTIaynfgHFcAQo9NK"},"Node property prediction")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://colab.research.google.com/drive/1QdX7CDdajIAb04lqaO5PfJlpKG-ljG28"},"Link prediction"))),(0,n.kt)("p",null,"The examples demonstrate how to extract a subgraph,\ntrain graph convolutional or neural networks (GCNs or GNNs), make some node property\nor link predictions and save them back in K\xf9zu so you can query these predictions."),(0,n.kt)("h3",{id:"networkx-queryresultget_as_networkx-function"},"NetworkX: ",(0,n.kt)("inlineCode",{parentName:"h3"},"QueryResult.get_as_networkx()")," function"),(0,n.kt)("p",null,"Our ",(0,n.kt)("a",{parentName:"p",href:"https://kuzudb.com/docs/client-apis/python-api/overview.html"},"Python API")," now has a\nnew ",(0,n.kt)("a",{parentName:"p",href:"../docs/client-apis/python-api/query-result.md#query_result.QueryResult.get_as_networkx"},(0,n.kt)("inlineCode",{parentName:"a"},"QueryResult.get_as_networkx()"))," function that can convert query results\nthat contain nodes and relationships into NetworkX directed or undirected graphs. Using this function, you can build pipelines\nthat benefits from K\xf9zu's DBMS functionalities (e.g., querying, data extraction and transformations,\nusing a high-level query language with very fast performance), and NetworkX's rich library of\ngraph analytics algorithms."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Colab Demonstration:"),"\nHere is a ",(0,n.kt)("a",{parentName:"p",href:"https://colab.research.google.com/drive/1NDsnFDWcSGoaOl-mOgG0zrPG2VAr8Q6H?usp=sharing#scrollTo=AkpBul7ZpUM5"},"Colab notebook"),"\nthat you can play around with that shows how to do basic graph visualization of query results\nand build a pipeline that computes PageRanks of a subgraph and store those PageRank\nvalues back as new node properties in K\xf9zu and query them."),(0,n.kt)("h2",{id:"data-import-from-and-export-to-parquet-and-arrow"},"Data Import from and Export to Parquet and Arrow"),(0,n.kt)("p",null,"We have removed our own CSV reader and instead now use ",(0,n.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Arrow"),"\nas our default library when bulk importing data through ",(0,n.kt)("a",{parentName:"p",href:"https://kuzudb.com/docs/data-import/csv-import.html"},(0,n.kt)("inlineCode",{parentName:"a"},"COPY FROM")," statements"),".\nUsing Arrow, we can not only bulk import\nfrom CSV files but also from arrow IPC and parquet files. We detect the file type\nfrom the suffix of the file; so if the query says ",(0,n.kt)("inlineCode",{parentName:"p"},"COPY user FROM ./user.parquet"),",\nwe infer that this is a parquet file and parse it so. See the details ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/../data-import/parquet-import.md"},"here"),"."),(0,n.kt)("h2",{id:"multi-labeled-or-unlabeled-queries"},"Multi-labeled or Unlabeled Queries"),(0,n.kt)("p",null,"A very useful feature of the query languages of GDBMSs is their\nability to elegantly express unions of join queries.\nWe had written about this feature of GDBMSs in this blog post about\n",(0,n.kt)("a",{parentName:"p",href:"/docusaurus/blog/what-every-gdbms-should-do-and-vision"},"What Every Competent GDBMS Should Do"),"\n(see the last paragraph of Section ",(0,n.kt)("inlineCode",{parentName:"p"},"Feature 4: Schema Querying"),").\nIn Cypher, a good example\nof this is to not bind the node and relationship variables to a specific node/relationship\nlabels/tables. Consider this query:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"MATCH (a:User)-[e]->(b)\nWHERE a.name = 'Karissa'\nRETURN a, e, b\n")),(0,n.kt)("p",null,"This query asks for all types of relationships that Karissa can have to any possible other\nnode (not necessarily of label ",(0,n.kt)("inlineCode",{parentName:"p"},"User"),") in the query. So if the database contains\n",(0,n.kt)("inlineCode",{parentName:"p"},"Likes")," relationships from ",(0,n.kt)("inlineCode",{parentName:"p"},"Users")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"Comments"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"Follows")," relationships\nfrom ",(0,n.kt)("inlineCode",{parentName:"p"},"Users")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"Users"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"LivesIn")," relationships from ",(0,n.kt)("inlineCode",{parentName:"p"},"Users")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"Cities"),",\nvariables e and b can bind to records from all of these\nrelationship and node labels, respectively. "),(0,n.kt)("p",null,"You can also restrict the labels of nodes/rels to a fixed set that contains\nmore than one label using the ",(0,n.kt)("inlineCode",{parentName:"p"},"|")," syntax.\nFor example you can do:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"MATCH (a:User)-[e:Likes|Follows]->(b)\nWHERE a.name = 'Karissa'\nRETURN a, e, b\n")),(0,n.kt)("p",null,"This forces e to match to only Likes relationship or Follows relationship records (so\nexcludes the ",(0,n.kt)("inlineCode",{parentName:"p"},"LivesIn")," records we mentioned above). The ",(0,n.kt)("inlineCode",{parentName:"p"},"|")," is a syntax adapted from\nregexes originally and is also used in query languages that support ",(0,n.kt)("inlineCode",{parentName:"p"},"regular path queries"),". "),(0,n.kt)("p",null,"K\xf9zu now supports such queries. Our query execution\nis based on performing scans of each possible node/rel table and index\nand when a variable ",(0,n.kt)("inlineCode",{parentName:"p"},"x")," can bind to multiple node/rel tables, ",(0,n.kt)("inlineCode",{parentName:"p"},"L1, L2, ..., Lk"),",\nwe reserve one vector for each possible property of each node/rel table.",(0,n.kt)("br",{parentName:"p"}),"\n","If anyone has any optimizations to do something smarter, it would be very interesting\nto hear!"),(0,n.kt)("h2",{id:"other-important-changes"},"Other Important Changes"),(0,n.kt)("h3",{id:"enhanced-string-features"},"Enhanced String Features"),(0,n.kt)("p",null,"We've added two important features to enhance K\xf9zu's ability to store and process strings:"),(0,n.kt)("p",null,"1) Support of UTF-8 characters. With the help of ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/JuliaStrings/utf8proc"},"utf8proc"),", you can now store string node/relationship\nproperties in K\xf9zu that has UTF-8 characters;\n2) Support of ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/expressions/pattern-matching.md"},"regex pattern matching")," with strings. K\xf9zu now supports Cypher's ",(0,n.kt)("inlineCode",{parentName:"p"},"=~")," operator for regex searches, which will return true if its pattern mathces the entire input string. For example: ",(0,n.kt)("inlineCode",{parentName:"p"},"RETURN 'abc' =~ '.*(b|d).*';"),"."),(0,n.kt)("h3",{id:"case-expression"},"CASE Expression"),(0,n.kt)("p",null,"We've added ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/expressions/case-expression.md"},"CASE")," for conditional expressions.\nTwo forms (",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/expressions/case-expression.md#simple-form"},"Simple Form")," and ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/expressions/case-expression.md#general-form"},"General Form"),") of CASE expression are supported."),(0,n.kt)("h3",{id:"alterdropsetdelete"},"ALTER/DROP/SET/DELETE"),(0,n.kt)("p",null,"We added ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/ddl.md#alter-table"},"ALTER TABLE")," and ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/ddl.md#drop-table"},"DROP TABLE")," DDL statements.\nAfter creating a new node or relationship table, you can now drop it, rename it, and alter it by adding new columns/properties,\nrenaming or dropping existing columns/properties."),(0,n.kt)("p",null,"Besides schema level changes, you can change properties of existing nodes/rels with ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/data-manipulation-clauses/set.md"},"SET")," statements, and remove existing nodes/rels with ",(0,n.kt)("a",{parentName:"p",href:"../docs/cypher/data-manipulation-clauses/delete.md"},"DELETE")," statements."),(0,n.kt)("h3",{id:"disable-relationships-with-multiple-source-or-destination-labels"},"Disable Relationships with Multiple Source or Destination Labels"),(0,n.kt)("p",null,"We now no longer support defining a relationship between multiple source or destination labels.\nThis is to simplify our storage. But please let us know if you have strong use cases on this."),(0,n.kt)("p",null,"Enjoy our new release and don't forget to donate to the earthquake victims."),(0,n.kt)("div",{className:"footnotes"},(0,n.kt)("hr",{parentName:"div"}),(0,n.kt)("ol",{parentName:"div"},(0,n.kt)("li",{parentName:"ol",id:"fn-1-4af10a"},"For T\xfcrkiye two other organizations are ",(0,n.kt)("a",{parentName:"li",href:"https://en.afad.gov.tr/earthquake-campaign"},"AFAD"),", which is the public institute for coordinating natural disaster response and ",(0,n.kt)("a",{parentName:"li",href:"https://www.akut.org.tr/en/donation"},"Akut"),", a volunteer-based and highly organized search and rescue group. For Syria, another campaign I can recommend is ",(0,n.kt)("a",{parentName:"li",href:"https://molhamteam.com/en/campaigns/439?fbclid=IwAR3_t443XME9Gh0r75KM4VpQ58WLNPd8w8tyMV2JprdObwecPwhWAdX2FOQ"},"Molham Team"),", which is an organization founded by Syrian refugee students.",(0,n.kt)("a",{parentName:"li",href:"#fnref-1-4af10a",className:"footnote-backref"},"\u21a9")))))}d.isMDXComponent=!0}}]);